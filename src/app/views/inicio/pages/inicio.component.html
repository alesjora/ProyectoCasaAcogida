<div class="container">
  <div *ngIf="storeService.getUserProfile() == 'conserje'; else tecnico">
    <div class="header">
      <igx-input-group class="search" type="search">
        <input #searchBar igxInput placeholder="Buscar por nombre, fecha, habitación o cama" [(ngModel)]="search"
          (keyup)="applyFilter($event.target.value)" />
        <igx-prefix>
          <igx-icon>search</igx-icon>
        </igx-prefix>
        <igx-suffix *ngIf="searchBar.value.length > 0" (click)="search = null">
          <igx-icon>clear</igx-icon>
        </igx-suffix>
      </igx-input-group>
      <button routerLink="/dashboard/nuevo-ingreso" mat-raised-button color="primary">Nuevo ingreso</button>
    </div>
    <div class="table-container mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" matSort>

        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre y apellidos</th>
          <td class="name_avatar" mat-cell *matCellDef="let element">
            <igx-avatar [src]="element.image" roundShape="true"></igx-avatar>
            {{element.name}} {{ element.surname1}} {{ element.surname2}}
          </td>
        </ng-container>

        <!-- Entry_date Column -->
        <ng-container matColumnDef="entry_date">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha de entrada </th>
          <td mat-cell *matCellDef="let element"> {{element.entry_date}} </td>
        </ng-container>

        <!-- Departure_date Column -->
        <ng-container matColumnDef="departure_date">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha de salida </th>
          <td mat-cell *matCellDef="let element"> {{element.departure_date == NULL ? 'Sin fecha de salida': element.departure_date }} </td>
        </ng-container>

        <!-- Room Column -->
        <ng-container matColumnDef="room">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Habitación </th>
          <td mat-cell *matCellDef="let element"> {{element.room}} </td>
        </ng-container>

        <!-- Bed Column -->
        <ng-container matColumnDef="bed">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Cama </th>
          <td mat-cell *matCellDef="let element"> {{element.bed}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" routerLink="/dashboard/ficha-personal/{{row.id}}">
        </tr>
      </table>
    </div>
  </div>

  <ng-template #tecnico>
    <p>tecnico works!</p>
  </ng-template>
</div>